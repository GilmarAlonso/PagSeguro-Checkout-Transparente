<?xml version="1.0" encoding="utf-8"?>
<modification>
  <name>PagSeguro Checkout Transparente</name>
  <code>19676</code>
  <version>1.0</version>
  <author>Valdeir Psr</author>
  <link>http://www.valdeirsantana.com.br</link>
  <link>valdeir_pagseguro</link>
  <file path="catalog/controller/checkout/checkout.php">
    <operation error="skip">
      <search><![CDATA[$this->load->language('checkout/checkout');]]></search>
      <add position="after"><![CDATA[
        //Verifica se estÃ¡ em modo de teste
        if (!$this->config->get('pagseguro_modo_teste')) {
          $this->document->addScript('https://stc.pagseguro.uol.com.br/pagseguro/api/v2/checkout/pagseguro.directpayment.js');
        } else {
          $this->document->addScript('https://stc.sandbox.pagseguro.uol.com.br/pagseguro/api/v2/checkout/pagseguro.directpayment.js');
        }
        
        $data['pagseguro_modo_teste'] = $this->config->get('pagseguro_modo_teste');
      ]]></add>
    </operation>
  </file>
  <file path="catalog/view/theme/*/template/common/header.tpl">
    <operation erro="log">
      <search><![CDATA[<?php foreach ($scripts as $script) { ?>]]></search>
      <add position="before"><![CDATA[
        <?php if (!$pagseguro_modo_teste) { ?>
          <script src="https://stc.pagseguro.uol.com.br/pagseguro/api/v2/checkout/pagseguro.directpayment.js" type="text/javascript"></script>
        <?php } else { ?>
          <script src="https://stc.sandbox.pagseguro.uol.com.br/pagseguro/api/v2/checkout/pagseguro.directpayment.js" type="text/javascript"></script>
        <?php } ?>
      ]]></add>
    </operation>
  </file>
</modification>